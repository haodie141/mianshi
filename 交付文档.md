# 交付一

用户表：

主键ID，角色名，密码，是否Pro（超级管理员），创建时间，最后一次更新时间

角色表：

主键ID，角色名，创建时间，最后一次更新时间

权限表：

主键ID，是否pro的编号，创建时间，最后一次更新时间

用户-角色表：

继承关系，用户ID，角色ID

角色-权限表：

是否pro的编号-角色ID统一，更新时间



# 交付二

### 2.1 用户认证

**POST /api/login/**

- 功能：用户登录
- 参数：username, password
- 返回：用户基本信息 + 角色列表

**POST /api/register/**

- 功能：用户注册
- 参数：username, password
- 返回：注册结果

### 2.2 用户管理

**GET /api/users/**

- 功能：获取所有用户（仅管理员可见）
- 返回：用户列表（含角色信息）

**GET /api/users/{id}/**

- 功能：获取单个用户信息
- 返回：用户详情

### 2.3 角色管理

**GET /api/roles/**

- 功能：获取所有角色
- 返回：角色列表

**POST /api/users/{id}/roles/**

- 功能：为用户分配角色
- 参数：role_id





# 交付三

## 3.1

继承：单向的，明确声明的

颗粒度：过粗的颗粒度无法满足一些精细的需求，过细的颗粒度又会浪费资源

## 3.2

超级管理员问题：所有管理员操作行为都应该被记录下来，如果有误操作可以通过回溯找回。管理员的身份是相对的，可以被撤销

并发修改权限：类似于git操作，当多个修改同时操作时，应该记录下各自的修改而不是覆盖他人的

## 3.3

对已知的，经常出现的权限放在缓存里，不用每次都调用数据库查询

比如登录访问这些简单的操作，就可以放在缓存里